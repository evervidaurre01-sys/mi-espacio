<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mi Espacio</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

<style>
:root{
--bg1:#0b1220;
--bg2:#101e46;
--panel:#0f1c38;
--txt:#eaefff;
--g1:linear-gradient(135deg,#00c6ff,#0072ff);
--g2:linear-gradient(135deg,#43e97b,#38f9d7);
--g3:linear-gradient(135deg,#f7971e,#ffd200);
--g4:linear-gradient(135deg,#8e2de2,#4a00e0);
--g5:linear-gradient(135deg,#ff416c,#ff4b2b);
}
*{box-sizing:border-box;font-family:Inter}
body{
margin:0;
height:100vh;
background:linear-gradient(270deg,var(--bg1),var(--bg2));
background-size:400% 400%;
animation:bg 18s ease infinite;
color:var(--txt);
overflow:hidden;
}
@keyframes bg{
0%{background-position:0%}
50%{background-position:100%}
100%{background-position:0%}
}
header{
display:flex;
gap:10px;
padding:12px;
align-items:center;
}
header input{
flex:1;
padding:12px 16px;
border:none;
border-radius:30px;
font-size:15px;
}
header button{
width:46px;
height:46px;
border:none;
border-radius:50%;
background:var(--g1);
color:white;
font-size:20px;
}
main{
height:calc(100vh - 70px);
overflow:auto;
padding:10px;
}
.category{margin-bottom:22px}
.category h3{margin:10px;font-size:15px;opacity:.85}
.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(110px,1fr));
gap:12px;
padding:6px;
}
.tile{
height:110px;
border-radius:16px;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
position:relative;
cursor:pointer;
user-select:none;
}
.tile img{width:32px;height:32px;margin-bottom:6px}
.tile b{font-size:13px;text-align:center}
.fav{position:absolute;top:6px;right:8px;font-size:18px}
.del{position:absolute;bottom:6px;right:8px;font-size:16px}

/* PANEL FAVORITOS */
#panel{
position:fixed;
top:0;
right:-240px;
width:240px;
height:100%;
background:var(--panel);
transition:.35s;
z-index:10;
display:flex;
flex-direction:column;
}
#panel.open{right:0}
#handle{
height:50px;
background:var(--g1);
display:flex;
align-items:center;
justify-content:center;
cursor:grab;
font-size:18px;
}
#favGrid{
flex:1;
overflow:auto;
padding:10px;
}

#add{
position:fixed;
bottom:20px;
right:20px;
width:60px;
height:60px;
border:none;
border-radius:50%;
background:var(--g1);
font-size:32px;
color:white;
box-shadow:0 12px 30px rgba(0,0,0,.45);
}

#modal{
position:fixed;
inset:0;
background:rgba(0,0,0,.75);
display:none;
align-items:center;
justify-content:center;
z-index:20;
}
#box{
background:#121d3b;
padding:16px;
border-radius:14px;
width:280px;
}
#box input{
width:100%;
padding:10px;
border:none;
border-radius:10px;
margin-bottom:8px;
}
#box button{
width:100%;
padding:10px;
border:none;
border-radius:10px;
background:var(--g1);
color:white;
}
</style>
</head>

<body>

<header>
<input id="search" placeholder="Buscar en Google..." onkeydown="if(event.key==='Enter')google()">
<button onclick="togglePanel()">‚≠ê</button>
</header>

<main id="content"></main>

<button id="add" onclick="modal.style.display='flex'">+</button>

<!-- PANEL FAVORITOS -->
<div id="panel">
<div id="handle">‚≠ê FAVORITOS</div>
<div id="favGrid" class="grid"></div>
</div>

<!-- MODAL -->
<div id="modal" onclick="if(event.target===this)this.style.display='none'">
<div id="box">
<input id="t" placeholder="Nombre">
<input id="u" placeholder="https://">
<input id="c" placeholder="Categor√≠a">
<button onclick="save()">Guardar</button>
</div>
</div>

<script>
const grads=["--g1","--g2","--g3","--g4","--g5"];
let data=JSON.parse(localStorage.getItem("data")||"[]");
let open=false;

function google(){
window.open("https://www.google.com/search?q="+encodeURIComponent(search.value));
}

function icon(url){
return "https://www.google.com/s2/favicons?sz=64&domain="+url;
}

function togglePanel(){
open=!open;
panel.classList.toggle("open",open);
}

handle.addEventListener("click",togglePanel);

function save(){
if(!t.value||!u.value||!c.value)return;
data.push({id:Date.now(),t:t.value,u:u.value,c:c.value,f:false});
store();
modal.style.display="none";
t.value=u.value=c.value="";
}

function store(){
localStorage.setItem("data",JSON.stringify(data));
render();
}

function render(){
content.innerHTML="";
favGrid.innerHTML="";
let cats=[...new Set(data.map(d=>d.c))];

cats.forEach((cat,i)=>{
const sec=document.createElement("div");
sec.className="category";
sec.innerHTML=`<h3>${cat}</h3><div class="grid"></div>`;
content.appendChild(sec);

const grid=sec.querySelector(".grid");
Sortable.create(grid,{animation:150,delay:100,delayOnTouchOnly:true});

data.filter(d=>d.c===cat).forEach(d=>{
const tile=document.createElement("div");
tile.className="tile";
tile.style.background=`var(${grads[i%grads.length]})`;
tile.innerHTML=`
<div class="fav" onclick="event.stopPropagation();fav(${d.id})">${d.f?"‚≠ê":"‚òÜ"}</div>
<div class="del" onclick="event.stopPropagation();del(${d.id})">üóë</div>
<img src="${icon(d.u)}">
<b>${d.t}</b>`;
tile.onclick=()=>window.open(d.u);
grid.appendChild(tile);

if(d.f){
const f=tile.cloneNode(true);
f.onclick=()=>window.open(d.u);
favGrid.appendChild(f);
}
});
});
Sortable.create(favGrid,{animation:150});
}

function fav(id){
data=data.map(d=>d.id===id?{...d,f:!d.f}:d);
store();
}
function del(id){
if(!confirm("¬øEliminar enlace?"))return;
data=data.filter(d=>d.id!==id);
store();
}

render();
</script>

</body>
</html>
